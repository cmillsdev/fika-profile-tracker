{% extends "base.html" %}

{% block title %}Overview - {{ player_id }}{% endblock %}

{% block content %}
    <h1>Overview for Player {{ player_id }}</h1>

    <!-- Basic Information Section -->
    <div class="card mb-3">
        <div class="card-header">
            <h2>Basic Information</h2>
        </div>
        <div class="card-body">
            <ul>
                <li><strong>Nickname:</strong> {{ overview.basic.nickname }}</li>
                <li><strong>Faction:</strong> {{ overview.basic.faction }}</li>
                <li><strong>Level:</strong> {{ overview.basic.level }}</li>
                <li><strong>Experience Gained:</strong> {{ overview.basic.exp_gained }}</li>
                <li><strong>Registration Date:</strong> {{ overview.basic.reg_date }}</li>
                <li><strong>Total Insured Items:</strong> {{ overview.basic.total_insured_items }}</li>
                <li><strong>Ragfair Rating:</strong> {{ overview.basic.ragfair_rating }}</li>
                <li><strong>Survivor Class:</strong> {{ overview.basic.survivor_class }}</li>
                <li><strong>In-Game Time:</strong> {{ overview.basic.ingame_time}}</li>
                <li><strong>Scav Karma:</strong> {{ overview.basic.scav_karma }}</li>
                <li><strong>Car Extracts:</strong>
                    <ul>
                        {% for location, count in overview.basic.car_extract_count.items() %}
                            <li>{{ location }}: {{ count }}</li>
                        {% endfor %}
                    </ul>
                </li>
            </ul>
        </div>
    </div>

    <!-- Accuracy Section -->
    <div class="card mb-3">
        <div class="card-header">
            <h2>Accuracy</h2>
        </div>
        <div class="card-body">
            <ul>
                <li><strong>Overall Accuracy:</strong> {{ overview.overall_accuracy }}</li>
                <li><strong>Session Accuracy:</strong> {{ overview.session_accuracy }}</li>
            </ul>
        </div>
    </div>

    <!-- Health Section -->
    <div class="card mb-3">
        <div class="card-header">
            <h2>Health</h2>
        </div>
        <div class="card-body">
            <ul>
                <li><strong>Energy:</strong> {{ overview.health.energy.Current }}/{{ overview.health.energy.Maximum }}</li>
                <li><strong>Hydration:</strong> {{ overview.health.hydration.Current }}/{{ overview.health.hydration.Maximum }}</li>
                <li><strong>Body Parts:</strong>
                    <ul>
                        {% for part, details in overview.health.health.items() %}
                            <li>
                                <strong>{{ part }}:</strong> {{ details.Health.Current }}/{{ details.Health.Maximum }}
                                {% if details.Effects %}
                                    <ul>
                                        {% for effect, value in details.Effects.items() %}
                                            <li><strong>{{ effect }}:</strong> {{ value.Time }}</li>
                                        {% endfor %}
                                    </ul>
                                {% endif %}
                            </li>
                        {% endfor %}
                    </ul>
                </li>
            </ul>
        </div>
    </div>

    <!-- Last Raid Section -->
    <div class="card mb-3">
        <div class="card-header">
            <h2>Last Raid</h2>
        </div>
        <div class="card-body">
            <ul>
                <li><strong>Last Death:</strong>
                    <ul>
                        <li><strong>Killer:</strong> {{ overview.last_raid.last_death.killer.name }} ({{ overview.last_raid.last_death.killer.side }})</li>
                        <li><strong>Weapon:</strong> {{ overview.last_raid.last_death.killer.weapon }}</li>
                        <li><strong>Body Part:</strong> {{ overview.last_raid.last_death.killer.BodyPart }}</li>
                        <li><strong>Cause:</strong> {{ overview.last_raid.last_death.cause.damage_type }} ({{ overview.last_raid.last_death.cause.weapon }})</li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
{% endblock %}